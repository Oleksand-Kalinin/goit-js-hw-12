{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/refs.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImgs(requestImgs, numberPage, countImgsForOnePage) {\n\n    axios.defaults.baseURL = 'https://pixabay.com/api/'\n    const option = {\n        params: {\n            key: '44207215-6e26e0e4c00d7fc92f72264f5',\n            q: requestImgs,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: numberPage,\n            per_page: countImgsForOnePage,\n        },\n    }\n    const response = await axios.get('', option);\n    return response.data;\n\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n});\n\n\n\nexport function markupGallery(objImgs, domEl) {\n    if (objImgs.hits.length !== 0) {\n        const markup = objImgs.hits\n            .map(image => {\n                return `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                    <img\n                        class=\"gallery-image\"\n                            src=\"${image.webformatURL}\"\n                            alt=\"${image.tags}\"\n                    />\n                </a>\n                  <div class=\"img-info\">\n                        <p class=\"img-info-text\"><span class=\"span-img-info\">Likes</span>${image.likes}</p>\n                        <p class=\"img-info-text\"><span class=\"span-img-info\">Views</span>${image.views}</p>\n                        <p class=\"img-info-text\"><span class=\"span-img-info\">Comments</span>${image.comments}</p>\n                        <p class=\"img-info-text\"><span class=\"span-img-info\">Downloads</span>${image.downloads}</p>\n                    </div>\n            </li>`\n            })\n            .join('');\n\n        domEl.insertAdjacentHTML(\"beforeend\", markup);\n\n        lightbox.refresh();\n\n    } else {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topCenter',\n        });\n    }\n\n}\n","export const formSearchImgs = document.querySelector('.form-search-imgs');\nexport const inputSearchImgs = document.querySelector('.img-search-request');\nexport const galleryListEl = document.querySelector('.gallery-list');\nexport const loaderEl = document.querySelector('.loader');\nexport const btnLoadMoreEl = document.querySelector('.btn-load-more');\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImgs } from \"./js/pixabay-api.js\";\nimport { markupGallery } from \"./js/render-functions.js\";\nimport {\n    formSearchImgs,\n    inputSearchImgs,\n    galleryListEl,\n    loaderEl,\n    btnLoadMoreEl\n} from \"./js/refs.js\";\n\nlet countImgsForOnePage = 15;\nlet numberPage;\nlet totalPage;\nlet currentUserRequest;\n\n\n\n\nformSearchImgs.addEventListener('submit', async (event) => {\n\n    event.preventDefault();\n    galleryListEl.innerHTML = '';\n    loaderEl.classList.remove('js-hide');\n    btnLoadMoreEl.classList.add('js-hide');\n\n    numberPage = 1;\n\n    if (inputSearchImgs.value.trim() !== '') {\n        try {\n            const objImgs = await getImgs(inputSearchImgs.value, numberPage, countImgsForOnePage);\n            markupGallery(objImgs, galleryListEl);\n\n            currentUserRequest = inputSearchImgs.value;\n            totalPage = Math.ceil(objImgs.total / countImgsForOnePage);\n\n            if (numberPage < totalPage) {\n                btnLoadMoreEl.classList.remove('js-hide');\n            }\n\n            loaderEl.classList.add('js-hide');\n\n        }\n        catch (err) {\n            console.log(err);\n        }\n    } else {\n        iziToast.error({\n            message: 'Please request for search imgs',\n            position: 'topCenter',\n        });\n        loaderEl.classList.add('js-hide');\n    }\n\n    formSearchImgs.reset();\n\n})\n\n\n\nbtnLoadMoreEl.addEventListener('click', async () => {\n\n    numberPage += 1;\n\n    loaderEl.classList.remove('js-hide');\n\n    try {\n        const objImgs = await getImgs(currentUserRequest, numberPage, countImgsForOnePage);\n        markupGallery(objImgs, galleryListEl);\n\n        if (numberPage >= totalPage) {\n            btnLoadMoreEl.classList.add('js-hide');\n            iziToast.success({\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'bottomCenter',\n            });\n        }\n\n        loaderEl.classList.add('js-hide');\n\n        const liEl = document.querySelector('.gallery-item');\n        const heightFirstImg = liEl.getBoundingClientRect().height;\n        setTimeout(() => {\n            window.scrollBy(0, heightFirstImg * 2 + 24);\n        }, 1500);\n\n    }\n    catch (err) {\n        console.log(err);\n    }\n\n});"],"names":["getImgs","requestImgs","numberPage","countImgsForOnePage","axios","option","lightbox","SimpleLightbox","markupGallery","objImgs","domEl","markup","image","iziToast","formSearchImgs","inputSearchImgs","galleryListEl","loaderEl","btnLoadMoreEl","totalPage","currentUserRequest","event","err","heightFirstImg"],"mappings":"owBAEO,eAAeA,EAAQC,EAAaC,EAAYC,EAAqB,CAExEC,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAS,CACX,OAAQ,CACJ,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACJ,EAED,OADiB,MAAMC,EAAM,IAAI,GAAIC,CAAM,GAC3B,IAEpB,CCdA,MAAMC,EAAW,IAAIC,EAAe,kBAAmB,CACnD,aAAc,IACd,aAAc,KAClB,CAAC,EAIM,SAASC,EAAcC,EAASC,EAAO,CAC1C,GAAID,EAAQ,KAAK,SAAW,EAAG,CAC3B,MAAME,EAASF,EAAQ,KAClB,IAAIG,GACM;AAAA;AAAA,gDAEyBA,EAAM,aAAa;AAAA;AAAA;AAAA,mCAGhCA,EAAM,YAAY;AAAA,mCAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,2FAI8CA,EAAM,KAAK;AAAA,2FACXA,EAAM,KAAK;AAAA,8FACRA,EAAM,QAAQ;AAAA,+FACbA,EAAM,SAAS;AAAA;AAAA,kBAGjG,EACA,KAAK,EAAE,EAEZF,EAAM,mBAAmB,YAAaC,CAAM,EAE5CL,EAAS,QAAO,CAExB,MACQO,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACtB,CAAS,CAGT,CC9CO,MAAMC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAkB,SAAS,cAAc,qBAAqB,EAC9DC,EAAgB,SAAS,cAAc,eAAe,EACtDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAgB,SAAS,cAAc,gBAAgB,ECQpE,IAAIf,EAAsB,GACtBD,EACAiB,EACAC,EAKJN,EAAe,iBAAiB,SAAU,MAAOO,GAAU,CASvD,GAPAA,EAAM,eAAc,EACpBL,EAAc,UAAY,GAC1BC,EAAS,UAAU,OAAO,SAAS,EACnCC,EAAc,UAAU,IAAI,SAAS,EAErChB,EAAa,EAETa,EAAgB,MAAM,KAAI,IAAO,GACjC,GAAI,CACA,MAAMN,EAAU,MAAMT,EAAQe,EAAgB,MAAOb,EAAYC,CAAmB,EACpFK,EAAcC,EAASO,CAAa,EAEpCI,EAAqBL,EAAgB,MACrCI,EAAY,KAAK,KAAKV,EAAQ,MAAQN,CAAmB,EAErDD,EAAaiB,GACbD,EAAc,UAAU,OAAO,SAAS,EAG5CD,EAAS,UAAU,IAAI,SAAS,CAEnC,OACMK,EAAK,CACR,QAAQ,IAAIA,CAAG,CAClB,MAEDT,EAAS,MAAM,CACX,QAAS,iCACT,SAAU,WACtB,CAAS,EACDI,EAAS,UAAU,IAAI,SAAS,EAGpCH,EAAe,MAAK,CAExB,CAAC,EAIDI,EAAc,iBAAiB,QAAS,SAAY,CAEhDhB,GAAc,EAEde,EAAS,UAAU,OAAO,SAAS,EAEnC,GAAI,CACA,MAAMR,EAAU,MAAMT,EAAQoB,EAAoBlB,EAAYC,CAAmB,EACjFK,EAAcC,EAASO,CAAa,EAEhCd,GAAciB,IACdD,EAAc,UAAU,IAAI,SAAS,EACrCL,EAAS,QAAQ,CACb,QAAS,6DACT,SAAU,cAC1B,CAAa,GAGLI,EAAS,UAAU,IAAI,SAAS,EAGhC,MAAMM,EADO,SAAS,cAAc,eAAe,EACvB,sBAAqB,EAAG,OACpD,WAAW,IAAM,CACb,OAAO,SAAS,EAAGA,EAAiB,EAAI,EAAE,CAC7C,EAAE,IAAI,CAEV,OACMD,EAAK,CACR,QAAQ,IAAIA,CAAG,CAClB,CAEL,CAAC"}